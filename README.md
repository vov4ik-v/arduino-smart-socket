# üîå Smart Socket Firmware (ESP32/Arduino)

–¶–µ –ø—Ä–æ—à–∏–≤–∫–∞ –¥–ª—è —Ä–æ–∑—É–º–Ω–æ—ó —Ä–æ–∑–µ—Ç–∫–∏, —è–∫–∞ –≤–∏–º—ñ—Ä—é—î **–Ω–∞–ø—Ä—É–≥—É**, **—Å—Ç—Ä—É–º**, –∫–µ—Ä—É—î **—Ä–µ–ª–µ** —ñ –ø–µ—Ä–µ–¥–∞—î –¥–∞–Ω—ñ –Ω–∞ —Å–µ—Ä–≤–µ—Ä —á–µ—Ä–µ–∑ Wi-Fi.

---

## üöÄ –ú–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

- üì∂ Wi-Fi –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è (STA –∞–±–æ Access Point)
- üì° –ù–∞–¥—Å–∏–ª–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö (–Ω–∞–ø—Ä—É–≥–∞, —Å—Ç—Ä—É–º, —Å—Ç–∞–Ω) –Ω–∞ —Å–µ—Ä–≤–µ—Ä —á–µ—Ä–µ–∑ HTTP POST
- üîÑ OTA –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–æ—à–∏–≤–∫–∏ (—á–µ—Ä–µ–∑ URL –∞–±–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è)
- üì≤ –í–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–µ—Ä—É–≤–∞–Ω–Ω—è: —Ä–µ–ª–µ, –∫–∞–ª—ñ–±—Ä—É–≤–∞–Ω–Ω—è, —Å–µ—Ä–≤–µ—Ä, Wi-Fi
- üìò –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å —É flash (—á–µ—Ä–µ–∑ `Preferences`)
- üîå –õ–æ–∫–∞–ª—å–Ω–µ –∫–µ—Ä—É–≤–∞–Ω–Ω—è —Ä–µ–ª–µ –∫–Ω–æ–ø–∫–æ—é

---

## üì¶ –ê–ø–∞—Ä–∞—Ç—É—Ä–∞

- ‚öôÔ∏è **–ö–æ–Ω—Ç—Ä–æ–ª–µ—Ä:** ESP32
- üîã **–î–∞—Ç—á–∏–∫–∏:**
  - –ù–∞–ø—Ä—É–≥–∞: ZMPT101B
  - –°—Ç—Ä—É–º: ACS712
- üí° **–Ü–Ω—à–µ:**
  - –†–µ–ª–µ
  - 2 –∫–Ω–æ–ø–∫–∏ (—Ä–µ–∂–∏–º / –ø–µ—Ä–µ–º–∏–∫–∞—á)
  - LED —ñ–Ω–¥–∏–∫–∞—Ü—ñ—è

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥—É

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç         | –û–ø–∏—Å |
|-------------------|------|
| `setupWebServer()` | HTTP —Å–µ—Ä–≤–µ—Ä –∑ –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º |
| `serverCommunication()` | –ü–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–∏—Ö –Ω–∞ –±–µ–∫–µ–Ω–¥ |
| `handleButtons()` | –û–±—Ä–æ–±–∫–∞ –∫–Ω–æ–ø–æ–∫ |
| `readAveragedSensor()` | –ó—á–∏—Ç—É–≤–∞–Ω–Ω—è –∑ ADC –∑ —É—Å–µ—Ä–µ–¥–Ω–µ–Ω–Ω—è–º |
| `acs712ToCurrent()` | –û–±—Ä–∞—Ö—É–Ω–æ–∫ —Å—Ç—Ä—É–º—É |
| `zmptToACVoltage()` | –û–±—Ä–∞—Ö—É–Ω–æ–∫ –Ω–∞–ø—Ä—É–≥–∏ |

---

## üåê API, –¥–æ —è–∫–æ–≥–æ –ø—ñ–¥–∫–ª—é—á–∞—î—Ç—å—Å—è

POST `http(s)://<server>/api/data`  
```json
{
  "voltage": 220.5,
  "current": 0.13,
  "state": true
}
```

–û—á—ñ–∫—É—î –≤—ñ–¥–ø–æ–≤—ñ–¥—å:
```json
{
  "relay": 1,
  "firmware": "http://..."
}
```

---

## üõ† –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –ø—ñ–Ω—ñ–≤

| –ù–∞–∑–≤–∞        | –ü—ñ–Ω |
|--------------|-----|
| –ù–∞–ø—Ä—É–≥–∞      | 1   |
| –°—Ç—Ä—É–º        | 2   |
| –†–µ–ª–µ         | 3   |
| –ö–Ω–æ–ø–∫–∞ 1     | 6   |
| –ö–Ω–æ–ø–∫–∞ 2     | 5   |
| LED          | 8   |

---

## ‚öôÔ∏è OTA –û–Ω–æ–≤–ª–µ–Ω–Ω—è

–ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–æ—à–∏–≤–∫–∏:
- –ß–µ—Ä–µ–∑ **URL** (`/upload-firmware-url`)
- –ß–µ—Ä–µ–∑ **–≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å** (`/upload-firmware-file`)

---

## üîê –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å

- `serverAddress` –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è —É `Preferences` –ø—ñ–¥ –∫–ª—é—á–µ–º `smart-socket`

---


## üë®‚Äçüíª –ê–≤—Ç–æ—Ä

**–í–æ–ª–æ–¥–∏–º–∏—Ä –í–∞—Å–∏–ª–∏—à–∏–Ω**  
üìß volodymyr.vasylyshyn05@gmail.com
